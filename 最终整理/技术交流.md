# 01.12

最近有一些面试，以及后来补充了一下技术栈，往我们服务里面加入了 Kafka 的应用。整个过程中有一定的思考和疑问，想请峰哥帮忙解惑一下。

## 一. 技术栈方面

最近主要恶补的是 Kafka 方面，之前我们的这块业务是一大坨的感觉，现在我把它拆分解耦了之后，感觉清晰了很多。我是使用 Kafka 的方式将这一部分的业务给解耦了的，而且我计划是从我们这部分业务为入手点，提取出来一个我们 ZB 业务自己的小框架，一方面用来解耦我们耦合度太高的整个 ZB 服务，另外一方面来保证 ZB 业务一定的并发量。从我们业务中的某个子业务为出发点，进行了优化。优化的结果是提高了并发、稳定性、正确性。首先想先问一下峰哥几个问题。

1. 首先是一个常见的面试题，当时技术选型的时候，为什么选 Kafka？以及 Kafka 与 RocketMQ 的优劣性的比较？（听说 RocketMQ 有自己实现 ）；
2. 如果我现在不介绍我如何使用了 Kafka，想请教一下，关于 Kafka 相关的需要注意的问题有哪些呢？
3. 我之前读了订单系统的代码，如果用业务支撑的方式订阅主题，通常每个订阅者都会以 UUID 的方式创建一个消费组，也就是说我们的 Kafka 只是用来做订阅的功能。我现在学了学 Kafka，也体会到潘仁前跟我说的，咱们这儿的 Kafka 使用方式不对，Kafka 应该是用来做削峰限流的。所以问题是，当时你们在开发过程中，Kafka 拿来是用来实现什么的？为什么没有使用一个消费组，多个消费者这样的模式呢？

## 二. 之前面试的问题

之前参加过蘑菇街面试，面试官问我的几个问题，想延伸请教一下峰哥：

1. 面试官问了我简历上 JVM 调优的经历，我把过程给讲了一遍，然后我又跟他说我做过一个我们 ZB 业务的一个日志记录功能。他问现在我们说白了是小作坊，如果对于一个大型的服务集群，用日志来查这些问题肯定很麻烦，所以如果让我设计一个服务集群的监控功能，怎么设计？要监控哪些指标，怎么获取这些数据？
	- 我当时感觉，包括现在，认为这个东西是应该使用 ELK 来做。但我现在还没有确定，所以想请教一下，如果咱的系统来做监控，应该用什么方式来做？
2. 面试官问我有没有比较了解的互联网架构设计？让我讲一下。我之前在网上看过一个秒杀系统，但当时有点忘记了，所以讲的不是太好。想问一下这种互联网架构设计的问题是不是应该注意？如果需要注意的话，我应该找哪些比较有意义，而且有现成资料的互联网架构呢？

## 三. 帮同学打听问题

同学在英国留学，可能七月份左右有机会回国呆半年，想到阿里实习，然后走转正路线。有些实习相关的问题想要打听一下。

1. 工作性质类似于项目管理，或者项目经理的实习岗位。我个人理解，管理项目应该是有一定的项目经历才能了解怎么管理，应该是一个比较高级一点的职位，所以这种岗位会对我同学这种没有生产经历的人开放吗？
2. 如果有项目管理之类的岗位，应该提前准备什么呢？

## 四. 私人问题

1. 嫂子是做什么工作的？
2. 引申个人问题，关于以后和女朋友一起跳槽到杭州，未来会面对稳定性问题。

# 02.28

## 一. 技术问题

### 1.1 通用技术方面

#### Dubbo

1. Dubbo 的熔断、突发流量的应对，目前在网络中我搜到的资料：用 Hystrix + Dubbo 或者 Dubbo Sentinel 处理熔断，用 Dubbo Sentinel 限制流量。目前我只有在这些知识点上只有这些方向，请问是否正确，如果正确的话，需要深入到什么样的程度？
	- 不一定要了解具体的产品，要了解 RPC 框架下的限流、熔断的思想，以及背后的设计原理；

### 1.2 业务支撑注册中心思考

1. 为什么自己实现分布式管理系统？
	- 问题考虑：Dubbo 在 2011 年就已经开源，而且按照自己的浅显理解，SPI 扩展点的设计应该也可以实现我们目前大多数分布式管理系统。那么为什么不在 Dubbo 的基础上进行二次开发，而要自行开发呢？
	- 原因一：虽然 2011 年开始开源，但 2015 年开始不维护了，2018 年才开始重新维护；而我们的项目正好是这几年断更的期间进行开发的，如果不维护，可能会有坑；
	- 原因二：Dubbo 的通信是基于纯 Java 框架的，而我们的服务有 C++ 语言，所以对于这种跨语言的情况，我们底层通讯用了 gRPC 的通讯方式，以及 Protobuf 的序列化方式。
2. 主题服务的连接
	- 在 Dubbo 中，涉及多个服务之间的远程调用，使用的是 RPC 远程调用，属于 TCP 传输层连接；在我们服务与主题的连接中，通常使用的 DASCommand 是基于 HTTP 协议。按照我浅显理解，如果面对较大的请求量，RPC 的长连接相较于 HTTP 的反复建立连接，应该是有较大的优势的。
	- 是否可以这样说：如果服务与主题默认使用 RPC 连接，效率会比基于 HTTP 协议高？如果是这样的话，当时是基于什么样的考虑才使用 DASCommand 这种基于 HTTP 协议的通讯方式呢？
	- 与注册中心通信， DASCommand，HTTP；（待查证）
	- 客户端与服务端交互，Netty；（待查证）

## 二. 前景问题

### 2.1 疫情影响

1. 这一次的疫情，对阿里乃至整个互联网公司会有什么积极、消极的意义呢？
	- 阿里的抗风险能力高，整体冲击比较小；
	- 冲击：电商，天猫淘宝，成交量减小；物流不如京东；
2. 在疫情期间我从外部的了解，阿里系最近最热门的产品是钉钉。除了钉钉之外，还有哪些业务部门，或者中台的某些部门带来一定的机遇？（情况是这样，但具体情况不了解）

### 2.2 就业形势

我观察阿里官网的招聘信息中，已经陆陆续续开放较中低等级职务的招聘了。所以有问题：

1. 高级开发工程师、专家，分别对应什么等级？
	- 高级开发工程师，P6；专家，P7
2. 面试流程：
	- 如果是官网简历，则简历评估，打一个短暂的电话，交谈半个小时左右，如果没问题则进入面试环节；
	- 前几面偏技术，通过项目经历展开技术上的面试：一面，P6 或 P7；二面未来主管；三面，另外一个其他团队的 P7 面试；
		- 此外需要注意基础，比如 Java 的基础，以及某些思想；
	- 四面是未来主管的主管，技术面较为发散、宏观，比如设计一个淘宝；
	- 五面是 HR 面，很简单的技术，以及人生规划、职业规划；